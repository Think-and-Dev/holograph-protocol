#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ---------------------------------------------------------------------------- #
#                                 Code updates                                 #
# ---------------------------------------------------------------------------- #

# -------------------------- Foundry code formatting ------------------------- #

# TODO: uncomment when the project as been migrate to foundry
# echo "ğŸ‘‰ Formatting code with Foundry..."
# forge fmt
# echo "âœ… Code formatted with Foundry.\n\n"

# ------------------------ Precompute Solidity Hashes ------------------------ #
echo "ğŸ‘‰ Precomputing Solidity hashes..."
npx ts-node scripts/precompute-solidity-hashes.ts
echo "âœ… Solidity hashes precomputed.\n\n"

# --------------------------- Add any changes made --------------------------- #

git add .

# ---------------------------------------------------------------------------- #
#                                    Checks                                    #
# ---------------------------------------------------------------------------- #

# ------------------------------ Natspec smells ------------------------------ #
# echo "ğŸ‘‰ Checking for missing natspecs..."
# natspecSmellsOutput=$(npx @defi-wonderland/natspec-smells 2>&1)

# # Compare the trimmed output to "No issues found"
# if [ "$natspecSmellsOutput" != "No issues found" ]; then
#   echo "â›”ï¸ Missing documentation or errors have been found:"
#   echo "$natspecSmellsOutput"
#   exit 1
# else
#   echo "âœ… No missing natspecs detected.\n"
# fi

# ------------------------------- Gas snapshot ------------------------------- #

# echo "ğŸ‘‰ Checking gas snapshots..."
# npm run snapshot:check
# echo "âœ… Gas snapshots are up to date.\n\n"
